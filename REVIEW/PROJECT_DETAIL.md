# 리뷰 이미지-텍스트 분석 프로젝트 상세 설명

---

## 1. 이미지 비교 동작 방식

### 1-1. 활용한 모델
- **OpenAI CLIP (Contrastive Language-Image Pretraining)**
  - 사전학습된 "openai/clip-vit-base-patch32" 모델 사용
  - 이미지와 텍스트를 임베딩(벡터)으로 변환할 수 있음
  - 본 프로젝트에서는 이미지-이미지 유사도 비교에만 활용

### 1-2. 이미지 비교 분석 과정 (단계별)
1. **입력**: 상품 이미지(pr.jpg), 리뷰 이미지(re.jpg 또는 te.jpg)
2. **전처리**: 배경 제거(rembg 라이브러리 활용, PNG로 변환)
3. **임베딩 추출**: CLIP 모델로 두 이미지 각각 임베딩 벡터 추출
4. **유사도 계산**: 두 임베딩 벡터의 코사인 유사도(cosine similarity) 계산
5. **정규화**: 코사인 유사도(-1~1)를 0~1로 정규화
6. **판별**: 유사도 점수에 따라 상품-리뷰 이미지 일치 여부 판단

### 1-3. 데이터 전처리 방법
- **배경 제거**: rembg 라이브러리로 리뷰/상품 이미지의 배경을 제거하여 상품 자체에 집중
- **이미지 크기/포맷**: PIL로 RGB 변환, 필요시 PNG로 저장

### 1-4. 유사도 판별 항목
- **코사인 유사도**: 두 이미지 임베딩 벡터의 cosine similarity
- **정규화 점수**: (cos_sim + 1) / 2 → 0~1 사이 값
- **임계값**:
  - 0.7 이상: 매우 유사 (동일 상품)
  - 0.4~0.7: 어느 정도 유사
  - 0.4 미만: 유사하지 않음/불일치

### 1-5. 어떻게 유사도를 판단하는지
- CLIP 모델의 이미지 임베딩 추출 → 두 이미지 임베딩의 코사인 유사도 계산
- 수식: 
  
  \[
  \text{유사도} = \frac{\text{임베딩}_1 \cdot \text{임베딩}_2}{\|\text{임베딩}_1\| \|\text{임베딩}_2\|}
  \]
- 0~1로 정규화하여 직관적으로 해석 가능

---

## 2. 텍스트 감정 분석 동작 방식

### 2-1. 감정 분석 모델
- **Huggingface Transformers Pipeline**
  - "klue/bert-base" 사전학습 모델 사용
  - pipeline("sentiment-analysis")로 긍정/부정 분류

### 2-2. 긍정적 감정에 대한 평가 지표
- 감정 분석 결과가 "positive" 또는 "긍정"일 때
- **score** 값(0~1, 1에 가까울수록 더 긍정적)
- 예시: {"label": "positive", "score": 0.85}

### 2-3. 부정적 감정에 대한 평가지표
- 감정 분석 결과가 "negative" 또는 "부정"일 때
- **score** 값(0~1, 0에 가까울수록 더 부정적)
- 예시: {"label": "negative", "score": 0.25}

### 2-4. 가중치가 어떻게 설정되어있는지
- **이미지-이미지 유사도**와 **감정분석**은 독립적으로 결과를 산출
- 최종 종합 평가는 아래와 같이 구성:
  - 이미지 유사도(0~1): 상품-리뷰 이미지 일치 여부 및 신뢰도
  - 감정분석(0~1): 리뷰의 긍정/부정 정도
- 두 결과를 종합하여 전체 평가 메시지에 함께 표기

---

## 예시 결과

```
{
  "image_similarity": {
    "score": 0.95,
    "is_matched": true,
    "description": "상품과 이미지가 매우 잘 일치합니다."
  },
  "confidence": {
    "score": 0.95,
    "level": "매우 높음"
  },
  "sentiment": {
    "label": "negative",
    "description": "부정적인 리뷰",
    "score": 0.33
  },
  "overall_assessment": "✅ 상품과 이미지가 잘 일치합니다! | 신뢰도: 95% | 😞 부정적 리뷰"
}
``` 